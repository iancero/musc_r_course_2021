<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Strings, should you care? | An Organic R Textbook</title>
  <meta name="description" content="This is the organic textbook accompanying Cero’s 2021 course on statistical programming with R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Strings, should you care? | An Organic R Textbook" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://iancero.github.io/musc_r_course_2021" />
  
  <meta property="og:description" content="This is the organic textbook accompanying Cero’s 2021 course on statistical programming with R" />
  <meta name="github-repo" content="iancero/musc_r_course_2021" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Strings, should you care? | An Organic R Textbook" />
  
  <meta name="twitter:description" content="This is the organic textbook accompanying Cero’s 2021 course on statistical programming with R" />
  

<meta name="author" content="Ian Cero, PhD MStat" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="basic-r.html"/>
<link rel="next" href="simulations.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#overview-of-the-r-ecosystem"><i class="fa fa-check"></i><b>2.1</b> Overview of the R ecosystem</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#installation"><i class="fa fa-check"></i><b>2.2</b> Installation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#step-1---download-and-install-the-r-language"><i class="fa fa-check"></i><b>2.2.1</b> Step 1 - Download and install the R language</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#step-2---download-and-install-the-rstudio-ide"><i class="fa fa-check"></i><b>2.2.2</b> Step 2 - Download and install the RStudio IDE</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started.html"><a href="getting-started.html#step-3---install-the-tidyverse-package-optional"><i class="fa fa-check"></i><b>2.2.3</b> Step 3 - Install the <code>tidyverse</code> package (optional)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#a-tour-of-rstudio"><i class="fa fa-check"></i><b>2.3</b> A tour of RStudio</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="getting-started.html"><a href="getting-started.html#the-console"><i class="fa fa-check"></i><b>2.3.1</b> The console</a></li>
<li class="chapter" data-level="2.3.2" data-path="getting-started.html"><a href="getting-started.html#the-environment"><i class="fa fa-check"></i><b>2.3.2</b> The environment</a></li>
<li class="chapter" data-level="2.3.3" data-path="getting-started.html"><a href="getting-started.html#the-lower-right-pane"><i class="fa fa-check"></i><b>2.3.3</b> The lower right pane</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-started.html"><a href="getting-started.html#your-very-first-analysis"><i class="fa fa-check"></i><b>2.4</b> Your very first analysis</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="getting-started.html"><a href="getting-started.html#step-1---download-the-data"><i class="fa fa-check"></i><b>2.4.1</b> Step 1 - download the data</a></li>
<li class="chapter" data-level="2.4.2" data-path="getting-started.html"><a href="getting-started.html#step-2---make-an-rstudio-project"><i class="fa fa-check"></i><b>2.4.2</b> Step 2 - Make an RStudio Project</a></li>
<li class="chapter" data-level="2.4.3" data-path="getting-started.html"><a href="getting-started.html#step-3---get-the-data-into-your-project-folder"><i class="fa fa-check"></i><b>2.4.3</b> Step 3 - Get the data into your project folder</a></li>
<li class="chapter" data-level="2.4.4" data-path="getting-started.html"><a href="getting-started.html#step-4---open-an-rmarkdown-notebook"><i class="fa fa-check"></i><b>2.4.4</b> Step 4 - Open an Rmarkdown Notebook</a></li>
<li class="chapter" data-level="2.4.5" data-path="getting-started.html"><a href="getting-started.html#step-5---create-a-space-to-code"><i class="fa fa-check"></i><b>2.4.5</b> Step 5 - Create a space to code</a></li>
<li class="chapter" data-level="2.4.6" data-path="getting-started.html"><a href="getting-started.html#step-6---write-a-command-to-import-the-data"><i class="fa fa-check"></i><b>2.4.6</b> Step 6 - Write a command to import the data</a></li>
<li class="chapter" data-level="2.4.7" data-path="getting-started.html"><a href="getting-started.html#step-7---look-inside-the-data"><i class="fa fa-check"></i><b>2.4.7</b> Step 7 - Look inside the data</a></li>
<li class="chapter" data-level="2.4.8" data-path="getting-started.html"><a href="getting-started.html#step-8---make-a-histogram"><i class="fa fa-check"></i><b>2.4.8</b> Step 8 - Make a histogram</a></li>
<li class="chapter" data-level="2.4.9" data-path="getting-started.html"><a href="getting-started.html#step-9---run-a-regression"><i class="fa fa-check"></i><b>2.4.9</b> Step 9 - Run a regression</a></li>
<li class="chapter" data-level="2.4.10" data-path="getting-started.html"><a href="getting-started.html#step-10---get-a-summary-of-your-results"><i class="fa fa-check"></i><b>2.4.10</b> Step 10 - Get a summary of your results</a></li>
<li class="chapter" data-level="2.4.11" data-path="getting-started.html"><a href="getting-started.html#a-look-forward"><i class="fa fa-check"></i><b>2.4.11</b> A Look forward</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>3</b> Basic R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basic-r.html"><a href="basic-r.html#writing-in-r-and-rmarkdown"><i class="fa fa-check"></i><b>3.1</b> Writing in R and Rmarkdown</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="basic-r.html"><a href="basic-r.html#chatting-with-r"><i class="fa fa-check"></i><b>3.1.1</b> Chatting with R</a></li>
<li class="chapter" data-level="3.1.2" data-path="basic-r.html"><a href="basic-r.html#rmarkdown-tricks"><i class="fa fa-check"></i><b>3.1.2</b> Rmarkdown tricks</a></li>
<li class="chapter" data-level="3.1.3" data-path="basic-r.html"><a href="basic-r.html#code-blocks"><i class="fa fa-check"></i><b>3.1.3</b> Code blocks</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="basic-r.html"><a href="basic-r.html#variables"><i class="fa fa-check"></i><b>3.2</b> Variables</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="basic-r.html"><a href="basic-r.html#the-assignment-operator"><i class="fa fa-check"></i><b>3.2.1</b> The assignment operator</a></li>
<li class="chapter" data-level="3.2.2" data-path="basic-r.html"><a href="basic-r.html#numerics"><i class="fa fa-check"></i><b>3.2.2</b> Numerics</a></li>
<li class="chapter" data-level="3.2.3" data-path="basic-r.html"><a href="basic-r.html#characters"><i class="fa fa-check"></i><b>3.2.3</b> Characters</a></li>
<li class="chapter" data-level="3.2.4" data-path="basic-r.html"><a href="basic-r.html#booleans"><i class="fa fa-check"></i><b>3.2.4</b> Booleans</a></li>
<li class="chapter" data-level="3.2.5" data-path="basic-r.html"><a href="basic-r.html#special-types"><i class="fa fa-check"></i><b>3.2.5</b> Special types</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>3.3</b> Vectors</a></li>
<li class="chapter" data-level="3.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>3.4</b> Lists</a></li>
<li class="chapter" data-level="3.5" data-path="basic-r.html"><a href="basic-r.html#dataframes"><i class="fa fa-check"></i><b>3.5</b> Dataframes</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="basic-r.html"><a href="basic-r.html#construction"><i class="fa fa-check"></i><b>3.5.1</b> Construction</a></li>
<li class="chapter" data-level="3.5.2" data-path="basic-r.html"><a href="basic-r.html#built-in-dataframes"><i class="fa fa-check"></i><b>3.5.2</b> Built-in dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="basic-r.html"><a href="basic-r.html#functions"><i class="fa fa-check"></i><b>3.6</b> Functions</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="basic-r.html"><a href="basic-r.html#getting-help"><i class="fa fa-check"></i><b>3.6.1</b> Getting help</a></li>
<li class="chapter" data-level="3.6.2" data-path="basic-r.html"><a href="basic-r.html#function-parameters"><i class="fa fa-check"></i><b>3.6.2</b> Function parameters</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="basic-r.html"><a href="basic-r.html#packages"><i class="fa fa-check"></i><b>3.7</b> Packages</a></li>
<li class="chapter" data-level="3.8" data-path="basic-r.html"><a href="basic-r.html#error-messages"><i class="fa fa-check"></i><b>3.8</b> Error messages</a></li>
<li class="chapter" data-level="3.9" data-path="basic-r.html"><a href="basic-r.html#coding-conventions"><i class="fa fa-check"></i><b>3.9</b> Coding Conventions</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="basic-r.html"><a href="basic-r.html#what-should-my-code-look-like"><i class="fa fa-check"></i><b>3.9.1</b> What should my code look like?</a></li>
<li class="chapter" data-level="3.9.2" data-path="basic-r.html"><a href="basic-r.html#official-coding-conventions"><i class="fa fa-check"></i><b>3.9.2</b> Official coding conventions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html"><i class="fa fa-check"></i><b>4</b> Strings, should you care?</a>
<ul>
<li class="chapter" data-level="4.1" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#a-recurring-example"><i class="fa fa-check"></i><b>4.1</b> A recurring example</a></li>
<li class="chapter" data-level="4.2" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#join-the-datasets"><i class="fa fa-check"></i><b>4.2</b> Join the datasets</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#direction-order-of-operations"><i class="fa fa-check"></i><b>4.2.1</b> Direction / order of operations</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#extract-some-information"><i class="fa fa-check"></i><b>4.3</b> Extract some information</a></li>
<li class="chapter" data-level="4.4" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#phone-numbers"><i class="fa fa-check"></i><b>4.4</b> Phone numbers</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#what-about-using-str_extract_all"><i class="fa fa-check"></i><b>4.4.1</b> What about using <code>str_extract_all()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="strings-should-you-care.html"><a href="strings-should-you-care.html#string-interpolation"><i class="fa fa-check"></i><b>4.5</b> String interpolation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="simulations.html"><a href="simulations.html"><i class="fa fa-check"></i><b>5</b> Simulations</a>
<ul>
<li class="chapter" data-level="5.1" data-path="simulations.html"><a href="simulations.html#generating-fake-data"><i class="fa fa-check"></i><b>5.1</b> Generating fake data</a></li>
<li class="chapter" data-level="5.2" data-path="simulations.html"><a href="simulations.html#how-is-this-useful"><i class="fa fa-check"></i><b>5.2</b> How is this useful?</a></li>
<li class="chapter" data-level="5.3" data-path="simulations.html"><a href="simulations.html#re-testing-the-t-test"><i class="fa fa-check"></i><b>5.3</b> Re-testing the t-test</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Organic R Textbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings-should-you-care" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Strings, should you care?</h1>
<p>When it comes to learning R, there are two topics that almost no one ever <em>asks</em> for, but they still often appreciate having after the fact. The first of these is string manipulation.</p>
<p>Here, we show off some of R’s text manipulation abilities. If you see something you like, feel free to incorporate it.</p>
<div id="a-recurring-example" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> A recurring example</h2>
<p>Throughout this exercise, we’ll imagine we have an ongoing research study with multiple sources of important information:</p>
<ol style="list-style-type: decimal">
<li><p>A <code>contact_df</code>, which includes identifying contact information about the subjects in our study, some of which we need for administrative purposes, but some of which we also need for analysis (e.g., birth dates to calculate age, which will be used as a covariate in a regression.).</p></li>
<li><p>A <code>mood_df</code>, which contains the substantive information the study is about, including a mood score.</p></li>
</ol>
<p>Because each dataset only includes three people, they are easy to take a glance at below.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="strings-should-you-care.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb138-2"><a href="strings-should-you-care.html#cb138-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-3"><a href="strings-should-you-care.html#cb138-3" aria-hidden="true" tabindex="-1"></a>contact_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/contact_info.csv&#39;</span>)</span></code></pre></div>
<pre><code>## Rows: 3 Columns: 11
## -- Column specification ---------------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr (8): form_1_timestamp, fname, lname, phone, address, tax_day, tax_day_wish, ope...
## dbl (2): record_id, form_1_complete
## lgl (1): redcap_survey_identifier
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="strings-should-you-care.html#cb140-1" aria-hidden="true" tabindex="-1"></a>mood_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/mood_data.csv&#39;</span>)</span></code></pre></div>
<pre><code>## Rows: 3 Columns: 3
## -- Column specification ---------------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr (1): name
## dbl (2): age, mood_score
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="strings-should-you-care.html#cb142-1" aria-hidden="true" tabindex="-1"></a>contact_df</span></code></pre></div>
<pre><code>## # A tibble: 3 x 11
##   record_id redcap_survey_identifier form_1_timestamp fname lname phone address tax_day
##       &lt;dbl&gt; &lt;lgl&gt;                    &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
## 1         1 NA                       4/14/2022 14:30  Ian   Cero  314-~ 123 4t~ 4/23/2~
## 2         2 NA                       4/14/2022 14:32  Test  McFa~ (567~ 456 5t~ 4/22/2~
## 3         3 NA                       4/14/2022 14:34  Exam~ McFa~ 4567~ 789 6t~ 4/12/2~
## # ... with 3 more variables: tax_day_wish &lt;chr&gt;, open_ended &lt;chr&gt;,
## #   form_1_complete &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="strings-should-you-care.html#cb144-1" aria-hidden="true" tabindex="-1"></a>mood_df</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   name              age mood_score
##   &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt;
## 1 CERO, Ian          25          6
## 2 MCFAKE, Test       26          9
## 3 MCFAKE, Example    25          3</code></pre>
</div>
<div id="join-the-datasets" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Join the datasets</h2>
<p>One of the first, most obvious things we want to do might be joining these two datasets. That <em>should</em> be easy because we have names in both of them.</p>
<p>But wait! The names aren’t formatted in the same way. In the mood dataset, they are formatted like “CERO, Ian”, but in the contact dataset, they are formatted with two seperate variables: <code>fname</code> = Ian, <code>lname</code> = Cero. All of the joining operations we know require that at least one column is <em>identical</em> across the datasets. That’s how we know which scores to link.</p>
<p>To solve this, we can simply create a new <code>name</code> variable in the contact dataframe, using <code>paste()</code> and <code>toupper()</code>. Now, we will have a column with identical formatting in each dataframe.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="strings-should-you-care.html#cb146-1" aria-hidden="true" tabindex="-1"></a>contact_df <span class="ot">&lt;-</span> contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="strings-should-you-care.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb146-3"><a href="strings-should-you-care.html#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">paste</span>(<span class="fu">toupper</span>(lname), fname, <span class="at">sep =</span> <span class="st">&#39;, &#39;</span>))</span>
<span id="cb146-4"><a href="strings-should-you-care.html#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="strings-should-you-care.html#cb146-5" aria-hidden="true" tabindex="-1"></a>contact_df <span class="ot">&lt;-</span> contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb146-6"><a href="strings-should-you-care.html#cb146-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mood_df, <span class="at">by =</span> <span class="st">&#39;name&#39;</span>)</span></code></pre></div>
<div id="direction-order-of-operations" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Direction / order of operations</h3>
<p>Can we go the other way around, from mood to contact? Yes, but takes more work, as you can see below. This is an important lesson about R’s string functions: there is typically more than one way to solve a problem, but they are not all equally valuable. Sometimes, one is much harder than the others.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="strings-should-you-care.html#cb147-1" aria-hidden="true" tabindex="-1"></a>mood_df <span class="ot">&lt;-</span> mood_df <span class="sc">%&gt;%</span> </span>
<span id="cb147-2"><a href="strings-should-you-care.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb147-3"><a href="strings-should-you-care.html#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lname =</span> <span class="fu">str_extract</span>(name, <span class="st">&#39;</span><span class="sc">\\</span><span class="st">w+&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-4"><a href="strings-should-you-care.html#cb147-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb147-5"><a href="strings-should-you-care.html#cb147-5" aria-hidden="true" tabindex="-1"></a>      tools<span class="sc">::</span><span class="fu">toTitleCase</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb147-6"><a href="strings-should-you-care.html#cb147-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace</span>(<span class="st">&#39;Mcf&#39;</span>, <span class="st">&#39;McF&#39;</span>),</span>
<span id="cb147-7"><a href="strings-should-you-care.html#cb147-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fname =</span> <span class="fu">str_extract</span>(name, <span class="st">&#39;, </span><span class="sc">\\</span><span class="st">w+&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-8"><a href="strings-should-you-care.html#cb147-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_remove</span>(<span class="st">&#39;, &#39;</span>))</span>
<span id="cb147-9"><a href="strings-should-you-care.html#cb147-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-10"><a href="strings-should-you-care.html#cb147-10" aria-hidden="true" tabindex="-1"></a>mood_df <span class="sc">%&gt;%</span> </span>
<span id="cb147-11"><a href="strings-should-you-care.html#cb147-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(contact_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;fname&#39;</span>, <span class="st">&#39;lname&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 17
##   name.x   age.x mood_score.x lname  fname record_id redcap_survey_id~ form_1_timestamp
##   &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt; &lt;lgl&gt;             &lt;chr&gt;           
## 1 CERO, I~    25            6 Cero   Ian           1 NA                4/14/2022 14:30 
## 2 MCFAKE,~    26            9 McFake Test          2 NA                4/14/2022 14:32 
## 3 MCFAKE,~    25            3 McFake Exam~         3 NA                4/14/2022 14:34 
## # ... with 9 more variables: phone &lt;chr&gt;, address &lt;chr&gt;, tax_day &lt;chr&gt;,
## #   tax_day_wish &lt;chr&gt;, open_ended &lt;chr&gt;, form_1_complete &lt;dbl&gt;, name.y &lt;chr&gt;,
## #   age.y &lt;dbl&gt;, mood_score.y &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="extract-some-information" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Extract some information</h2>
<p>Often, a column in a spreadsheet holds many pieces of information… and we need just one specific piece. For example, a person’s address has much information about their location, but the zipcode is typically most useful for statistical analysis because we can associate it withe median income.</p>
<p>The problem comes in when we need <em>just</em> that one piece of information in a new column. Again, R comes to the rescue, this time with the <code>str_extract()</code> function, which takes two arguments: the text we want to grab something from, and the “pattern” of things we want to extract. In this case, the pattern <code>'[0-9]+$'</code> tells R to grab any digit from 0-9. The <code>+</code> says that it needs to be an unbroken sequence of digits and the <code>$</code> says it must come at the end of the main text, which is where zipcodes are always located.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="strings-should-you-care.html#cb149-1" aria-hidden="true" tabindex="-1"></a>contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="strings-should-you-care.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb149-3"><a href="strings-should-you-care.html#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">zip =</span> <span class="fu">str_extract</span>(address, <span class="st">&#39;[0-9]+$&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb149-4"><a href="strings-should-you-care.html#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(address, zip)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   address                          zip  
##   &lt;chr&gt;                            &lt;chr&gt;
## 1 123 4th St S  Appleton, MI 67890 67890
## 2 456 5th St  Appleton, MI 67890   67890
## 3 789 6th St  Appleton, MI 67890   67890</code></pre>
</div>
<div id="phone-numbers" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Phone numbers</h2>
<p>When you ask a research subject, they can give you a valid phone number in a variety of different ways: (123) 456-7890, 123-456-7890, 1234567890, and so on. This can make working with them complicated. Technically, all we need from a phone number is the numbers. We could use <code>str_extract()</code> for that, but to demonstrate another approach, let’s use <code>str_replace_all()</code> this time. Here, we tell R that we want to replace anything in <code>phone</code> that is NOT a digit (the <code>^</code> symbol means “not”) with <code>''</code> (an empty string / nothing).</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="strings-should-you-care.html#cb151-1" aria-hidden="true" tabindex="-1"></a>contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb151-2"><a href="strings-should-you-care.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb151-3"><a href="strings-should-you-care.html#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">formatted_phone =</span> <span class="fu">str_replace_all</span>(phone, <span class="st">&#39;[^0-9]&#39;</span>, <span class="st">&#39;&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb151-4"><a href="strings-should-you-care.html#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(phone, formatted_phone)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   phone          formatted_phone
##   &lt;chr&gt;          &lt;chr&gt;          
## 1 314-159-1234   3141591234     
## 2 (567) 123-5876 5671235876     
## 3 4567890123     4567890123</code></pre>
<p>They may not be pretty, but now all of our phone numbers are formatted in exactly the same way. This makes it easy to run subsequent manipulation tasks on them, like checking for duplicates.</p>
<div id="what-about-using-str_extract_all" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> What about using <code>str_extract_all()</code></h3>
<p>As we mentioned above, there are typically many ways to do the same process with strings, but one or the other often takes more work. In case you are interested, here is the process for extracting a phone number with <code>str_extract_all()</code>. The reason it is more complicated in this case is because that function returns a <code>list()</code> object, which means you need to wrap it in <code>map()</code> to play nice, then unlist and collapse it.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="strings-should-you-care.html#cb153-1" aria-hidden="true" tabindex="-1"></a>contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="strings-should-you-care.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb153-3"><a href="strings-should-you-care.html#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">formatted_phone =</span> <span class="fu">map_chr</span>(</span>
<span id="cb153-4"><a href="strings-should-you-care.html#cb153-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.x =</span> phone, </span>
<span id="cb153-5"><a href="strings-should-you-care.html#cb153-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.f =</span> <span class="sc">~</span> <span class="fu">str_extract_all</span>(.x, <span class="st">&#39;[0-9]+&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb153-6"><a href="strings-should-you-care.html#cb153-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb153-7"><a href="strings-should-you-care.html#cb153-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&#39;&#39;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb153-8"><a href="strings-should-you-care.html#cb153-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(phone, formatted_phone)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   phone          formatted_phone
##   &lt;chr&gt;          &lt;chr&gt;          
## 1 314-159-1234   3141591234     
## 2 (567) 123-5876 5671235876     
## 3 4567890123     4567890123</code></pre>
</div>
</div>
<div id="string-interpolation" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> String interpolation</h2>
<p>For basic tasks, the family of <code>str_...()</code> functions are great. But what if I want to do something more complicated, like compose a letter.</p>
<p>As a dmeonstration, our contact dataframe includes the date taxes were due, but also the days taxes were paid. What if we wanted to produce a message for everyone that included their last name, as well as the number of days late their taxes were.</p>
<p>Enter <code>glue</code> and <strong>string interpolation</strong>. This powerful tool lets us write out our template string, then use <code>{}</code> to refer to a variable that will be injected (“interpolated”) into that string, like so.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="strings-should-you-care.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span></code></pre></div>
<pre><code>## Warning: package &#39;glue&#39; was built under R version 4.1.3</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="strings-should-you-care.html#cb157-1" aria-hidden="true" tabindex="-1"></a>me <span class="ot">&lt;-</span> <span class="st">&#39;Ian&#39;</span></span>
<span id="cb157-2"><a href="strings-should-you-care.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glue</span>(<span class="st">&#39;My name is {me}&#39;</span>)</span></code></pre></div>
<pre><code>## My name is Ian</code></pre>
<p>We can use this knowledge to create individual messages for each person in our dataframe.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="strings-should-you-care.html#cb159-1" aria-hidden="true" tabindex="-1"></a>contact_df <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="strings-should-you-care.html#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb159-3"><a href="strings-should-you-care.html#cb159-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">tax_date =</span> lubridate<span class="sc">::</span><span class="fu">mdy</span>(tax_day),</span>
<span id="cb159-4"><a href="strings-should-you-care.html#cb159-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">days_late =</span> tax_date <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">&#39;2022-04-18&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb159-5"><a href="strings-should-you-care.html#cb159-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(days_late <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-6"><a href="strings-should-you-care.html#cb159-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">message =</span> <span class="fu">glue</span>(<span class="st">&#39;Dear Mr. {lname}, your taxes are {days_late} days late.&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb159-7"><a href="strings-should-you-care.html#cb159-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(lname, message)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   lname  message                                     
##   &lt;chr&gt;  &lt;glue&gt;                                      
## 1 Cero   Dear Mr. Cero, your taxes are 5 days late.  
## 2 McFake Dear Mr. McFake, your taxes are 4 days late.</code></pre>
<p>You can also do it with as many variables as you like.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="strings-should-you-care.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="strings-should-you-care.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb161-3"><a href="strings-should-you-care.html#cb161-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&#39;Ian&#39;</span>, <span class="st">&#39;Jen&#39;</span>, <span class="st">&#39;Andy&#39;</span>),</span>
<span id="cb161-4"><a href="strings-should-you-care.html#cb161-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">job =</span> <span class="fu">c</span>(<span class="st">&#39;statistician&#39;</span>, <span class="st">&#39;writer&#39;</span>, <span class="st">&#39;researcher&#39;</span>),</span>
<span id="cb161-5"><a href="strings-should-you-care.html#cb161-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronouns =</span> <span class="fu">c</span>(<span class="st">&#39;He&#39;</span>, <span class="st">&#39;She&#39;</span>, <span class="st">&#39;They&#39;</span>),</span>
<span id="cb161-6"><a href="strings-should-you-care.html#cb161-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">verb =</span> <span class="fu">ifelse</span>(pronouns <span class="sc">==</span> <span class="st">&#39;They&#39;</span>, <span class="st">&#39;are&#39;</span>, <span class="st">&#39;is&#39;</span>),</span>
<span id="cb161-7"><a href="strings-should-you-care.html#cb161-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">bio =</span> <span class="fu">glue</span>(<span class="st">&#39;This is {name}. {pronouns} {verb} a {job}.&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb161-8"><a href="strings-should-you-care.html#cb161-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(bio)</span></code></pre></div>
<pre><code>##                                    bio
## 1   This is Ian. He is a statistician.
## 2        This is Jen. She is a writer.
## 3 This is Andy. They are a researcher.</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="simulations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "sepia",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/iancero/musc_r_course_2021/edit/main/strings.Rmd",
"text": "Find a typo? Please suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
